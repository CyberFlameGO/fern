imports:
  serviceCommons: ./commons.yml
  commons: ../commons.yml
  types: ../types.yml
  inlinedServiceTypes: ./inlined-service-types.yml
types:
  WebSocketChannel:
    extends: commons.WithDocs
    properties:
      name: serviceCommons.NamedChannel
      path: string
      client: WebSocketMessenger
      server: WebSocketMessenger
      operationProperties: WebSocketOperationProperties
  WebSocketMessenger:
    properties:
      operations: list<WebSocketOperation>
  WebSocketOperation:
    extends: commons.WithDocs
    properties:
      operationId: string
      request: WebSocketRequest
      response: WebSocketResponse
  WebSocketRequest:
    extends: commons.WithDocs
    properties:
      encoding: serviceCommons.Encoding
      type: WebSocketOperationInlinedTypeReference
  WebSocketResponse:
    extends: commons.WithDocs
    properties:
      encoding: serviceCommons.Encoding
      ok: WebSocketOkResponse
      failed: serviceCommons.FailedResponse
  WebSocketOkResponse:
    extends: commons.WithDocs
    properties:
      type: WebSocketOperationInlinedTypeReference
  WebSocketOperationProperties:
    properties:
      id: string
      operation: string
      body: string
  WebSocketOperationInlinedTypeReference:
    union:
      model: types.TypeReference
      inlined: inlinedServiceTypes.InlinedOperationTypeName
