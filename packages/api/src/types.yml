imports:
  commons: commons.yml
ids:
  - name: FernFilepath
    docs: "A filepath to a Fern spec file, excluding the file extension"
types:
  TypeDefinition:
    docs: "A type, which is a name and a shape"
    extends: commons.WithDocs
    fields:
      name: NamedType
      shape: Type
  NamedType:
    fields:
      fernFilepath: FernFilepath
      name: string
  Type:
    union:
      alias: AliasTypeDefinition
      enum: EnumTypeDefinition
      object: ObjectTypeDefinition
      union: UnionTypeDefinition

  AliasTypeDefinition:
    fields:
      aliasOf: TypeReference

  EnumTypeDefinition:
    fields:
      values: list<EnumValue>
  EnumValue:
    extends: commons.WithDocs
    fields:
      value: string

  ObjectTypeDefinition:
    fields:
      extends:
        docs: "A list of other types to inherit from"
        type: list<NamedType>
      properties: list<ObjectProperty>
  ObjectProperty:
    extends: commons.WithDocs
    fields:
      key: string
      valueType: TypeReference

  UnionTypeDefinition:
    fields:
      discriminant: string
      types: list<SingleUnionType>
  SingleUnionType:
    extends: commons.WithDocs
    fields:
      discriminantValue: string
      valueType: TypeReference

  TypeReference:
    union:
      container: ContainerType
      named: NamedType
      primitive: PrimitiveType
      void: {}
  ContainerType:
    union:
      list: TypeReference
      map: MapType
      optional: TypeReference
      set: TypeReference
  MapType:
    fields:
      keyType: TypeReference
      valueType: TypeReference
  PrimitiveType:
    enum:
      - INTEGER
      - DOUBLE
      - STRING
      - BOOLEAN
      - docs: "Within the range -2^53 to 2^53"
        value: LONG
